jQuery.uriAnchor=function(){var e,n,t,r,o,i,a,c,h={clean0_regex:/^[#!]*/,clean1_regex:/\?[^?]*$/,settable_map_key:{schema_map:!0},schema_map:null};return e=function(e){var n=new Error;return n.name="Anchor Schema Reject",n.message=e,n},n=function(e){return void 0===e?"Undefined":null===e?"Null":{}.toString.call(e).slice(8,-1)},t=function(){return String(document.location.href.split("#")[1]||"").replace(h.clean0_regex,"").replace(h.clean1_regex,"")},r=function(e){var n,t,r,o=e.input_string||"",i=e.delimit_char||"&",a=e.delimit_kv_char||"=",c={};for(n=o.split(i),t=0;t<n.length;t++)1===(r=n[t].split(a)).length?c[decodeURIComponent(r[0])]=!0:2===r.length&&(c[decodeURIComponent(r[0])]=decodeURIComponent(r[1]));return c},o=function(t,r){var o,i,a,c,l,p,u,d,m,s,_,f,g=t||{},y=r||{},v=y.delimit_char||"&",k=y.delimit_kv_char||"=",w=y.sub_delimit_char||":",I=y.dep_delimit_char||"|",b=y.dep_kv_delimit_char||",",O=h.schema_map,R=[];if("Object"!==n(g))return!1;for(c in g)if(g.hasOwnProperty(c)){if(!c)continue;if(0===c.indexOf("_"))continue;if(O&&!O[c])throw e("Independent key |"+c+"| not authorized by anchor schema");if(u="",void 0===(l=g[c])&&(l=""),p=n(l),O&&(o=O[c],"Object"===n(o)&&!o[String(l)]))throw e("Independent key-value pair |"+c+"|"+String(l)+"| not authorized by anchor schema");if("Boolean"===p?l&&(u+=encodeURIComponent(c)):u+=encodeURIComponent(c)+k+encodeURIComponent(l),d="_"+c,g.hasOwnProperty(d)){if(m=g[d],f=[],O){if(!(i=O[d]))throw e("Dependent key |"+d+"| not authorized by anchor schema")}else i=null;for(s in m)if(m.hasOwnProperty(s)){if(_=m[s],i&&(a=i[s],"Object"===n(a)&&!a[String(_)]))throw e("Dependent key-value pair |"+s+"|"+String(_)+"| not authorized by anchor schema");"Boolean"===p?!0===_&&f.push(encodeURIComponent(s)):f.push(encodeURIComponent(s)+b+encodeURIComponent(_))}f.length>0&&(u+=w+f.join(I))}R.push(u)}return R.join(v)},i=function(e,n,t){var r,i,a=o(e,n);if(r=document.location.href.split("#",2),i=a?r[0]+"#!"+a:r[0],t)return a?document.location.replace(r[0]+"#!"+a):document.location.replace(r[0]),!0;document.location.href=i},a=function(){var e,o,i,a,c,h,l=t();if(""===l)return{};e=r({input_string:l,delimit_char:"&",delimit_kv_char:"="}),i=[];for(a in e)e.hasOwnProperty(a)&&i.push(a);for(o=0;o<i.length;o++)c=e[a=i[o]],"String"===n(c)&&""!==a&&(e["_s_"+a]=c,(h=c.split(":"))[1]&&""!==h[1]&&(e[a]=h[0],e["_"+a]=r({input_string:h[1],delimit_char:"|",delimit_kv_char:","})));return e},c=function(e){var n,t,r=h.settable_map_key;for(n in e)if(e.hasOwnProperty(n)){if(!r.hasOwnProperty(n))throw t=new Error,t.name="Bad Input",t.message="Setting config key |"+n+"| is not supported",t;h[n]=e[n]}},{configModule:c,getVarType:n,makeAnchorMap:a,makeAnchorString:o,setAnchor:i}}();