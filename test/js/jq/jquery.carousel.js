!function(t){function e(e,s){function i(){A=E.length,y=2*z/A;for(var s=0;s<A;s++)o(s);l(q),t.browser.msie||n(0),t(document).bind("mousemove",function(t){R=t.pageX,W=t.pageY}),e.onselectstart=function(){return!1},X.settings.autoScroll&&u(),X.settings.mouseScroll&&h(),X.settings.mouseDrag&&d(),X.settings.mouseWheel&&g(),X.settings.scrollbar&&m(),X.settings.tooltip&&t('<div class="tooltip"><p></p></div>').css("opacity",0).appendTo(O)}function o(e){var s=t('<img class="carousel-item"/>').appendTo(O);F.push(s),s.css({width:X.settings.itemWidth,h:X.settings.itemHeight}).data({w:X.settings.itemWidth,h:X.settings.itemHeight,index:e}).addClass("out").bind({mouseover:function(){t(this).hasClass("out")&&t(this).removeClass("out").addClass("over"),X.settings.tooltip&&w(e),X.settings.mouseScroll&&(j=X.settings.mouseScrollSpeedHover);var s={type:"itemMouseOver",index:e,data:E[e]};t.isFunction(X.settings.itemMouseOver)&&X.settings.itemMouseOver.call(this,s)},mouseout:function(){t(this).hasClass("over")&&t(this).removeClass("over").addClass("out"),X.settings.tooltip&&I(),X.settings.mouseScroll&&(j=X.settings.mouseScrollSpeed);var s={type:"itemMouseOut",index:e,data:E[e]};t.isFunction(X.settings.itemMouseOut)&&X.settings.itemMouseOut.call(this,s)},click:function(){O.find(".click").removeClass("click").addClass("out"),t(this).removeClass("over").addClass("click"),X.settings.scrollOnClick&&a(e),E[e].link&&window.open(E[e].link,E[e].linkTarget||X.settings.linkTarget);var s={type:"itemClick",index:e,data:E[e]};t.isFunction(X.settings.itemClick)&&X.settings.itemClick.call(this,s)}}),E[e].link&&s.css("cursor","pointer"),t.browser.msie&&n(e)}function n(e){var s=E[e].path,i=F[e];t("<img/>").load(function(){var o=parseInt(t(this).attr("width")||t(this).prop("width")),a=parseInt(t(this).attr("height")||t(this).prop("height"));X.settings.crop?i.css("background-image","url("+s+")"):(i.attr("src",s),i.css("background-image","none")),X.settings.resize&&(X.settings.maintainAspectRatio?(scaleX=X.settings.itemWidth/o,scaleY=X.settings.itemHeight/a,scaleX<scaleY?(o*=scaleX,a*=scaleX):(o*=scaleY,a*=scaleY)):(o=X.settings.itemWidth,a=X.settings.itemHeigh)),i.css({width:o,height:a}),i.data({w:o,h:a}),l(q),t.browser.msie||e<A-1&&n(++e)}).attr("src",s)}function l(e){O.find(".carousel-item").each(function(s){var i=t(this),o=i.data("w"),n=i.data("h"),l=Math.sin(-y*s+.5*z+e*Y)*X.settings.verticalRadius+K-.5*n,a=(l-(U-.5*n))/(V-U)*(1-X.settings.scaleRatio)+X.settings.scaleRatio;i.css({width:o*a,height:n*a,left:Math.cos(-y*s+.5*z+e*Y)*X.settings.horizontalRadius+J-.5*o+o*(1-a)/2,top:l+n*(1-a)/2,"z-index":Math.floor(10*a*A)})}),X.settings.scrollbar&&!G&&f(p())}function a(e){H=e;var s=y*(180/z)*e%360;q%=360,Math.abs(s-q)>180&&(s+=s>q?-360:360),s-q>180&&s>q&&(s-=360),v(),M=setInterval(function(){Math.abs(s-q)>.5?l(q+=(s-q)*(X.settings.scrollSpeed/100)):S()},30),e={type:"itemSelect",index:H,data:E[H]},t.isFunction(X.settings.itemSelect)&&X.settings.itemSelect.call(this,e)}function r(){a(H==E.length-1?0:H+1)}function c(){a(0==H?E.length-1:H-1)}function u(){$&&X.settings.pauseAutoScrollIfTooltip||(X.settings.autoScroll=!0,k=setTimeout(function(){"next"==X.settings.autoScrollDirection?r():"previous"==X.settings.autoScrollDirection&&c()},X.settings.autoScrollDelay))}function h(){X.settings.mouseScroll=!0,j=X.settings.mouseScrollSpeed;var t=0,e=X.settings.mouseScrollReverse?-1:1;T=setInterval(function(){R>O.offset().left&&R<O.offset().left+X.settings.width&&W>O.offset().top&&W<O.offset().top+X.settings.height?(t=e*(R-(O.offset().left+J))*(j/1e3),l(q+=t)):Math.abs(t)>.1?(t*=X.settings.mouseScrollEase/100,l(q+=t)):t=0},30)}function d(){function e(t){N=t.pageX,P||(v(),s())}function s(){P=!0,C=setInterval(function(){var t=(o*(N-L)/(100*X.settings.mouseDragSpeed)*360+i-q)*(X.settings.mouseDragEase/100);(t>=0?t:-t)>.1?(q+=t,H=Math.round(q*Y/y),l(q)):S()},30)}X.settings.mouseDrag=!0;var i=0,o=X.settings.mouseDragReverse?1:-1;t(document).bind("mousedown",function(s){R>O.offset().left&&R<O.offset().left+X.settings.width&&W>O.offset().top&&W<O.offset().top+X.settings.height&&(N=L=s.pageX,i=q,t(document).bind("mousemove",e))}),t(document).bind("mouseup",function(){t(document).unbind("mousemove",e)})}function g(){X.settings.mouseWheel=!0;var t=0,e=X.settings.mouseWheelReverse?-1:1;O.bind("mousewheel",function(s,i){s.preventDefault(),B||(v(),B=!0,t=q,D=setInterval(function(){Math.abs(t-q)>.5?(q+=(t-q)*(X.settings.mouseWheelSpeed/100),H=Math.round(q*Y/y),l(q)):S()},30)),t+=e*i*10})}function m(){function e(){u=R-n.offset().left-i,s()}function s(){u<0?u=0:u>parseInt(n.css("width"))-parseInt(a.css("width"))&&(u=parseInt(n.css("width"))-parseInt(a.css("width"))),G&&a.css("left",u),_=u/(parseInt(n.css("width"))-parseInt(a.css("width"))),Q||(v(),Q=!0,q%=360,x=setInterval(function(){if(Math.abs(p()-_)>.001){var t=(_-p())*(X.settings.scrollbarEase/100);q+=360*t,H=Math.round(q*Y/y),l(q)}else Q&&S()},30))}var i,o=t('<div class="scrollbar"></div>').appendTo(O),n=t('<div class="track"></div>').appendTo(o),a=t('<div class="thumb"></div>').appendTo(n),r=t('<div class="left"></div>').appendTo(o),c=t('<div class="right"></div>').appendTo(o),u=0;o.css({top:V,left:J-parseInt(o.css("width"))/2}),a.bind("mousedown",function(s){s.preventDefault(),i=R-a.offset().left,G=!0,t(document).bind("mousemove",e)}),t(document).bind("mouseup",function(){G&&(G=!1,t(document).unbind("mousemove",e))}),r.bind("click",function(){u=parseInt(a.css("left"))-X.settings.arrowScrollAmount,s()}),c.bind("click",function(){u=parseInt(a.css("left"))+X.settings.arrowScrollAmount,s()})}function f(t){var e=O.find(".scrollbar").find(".track"),s=e.find(".thumb");s.css("left",t*(parseInt(e.css("width"))-parseInt(s.css("width"))))}function p(){var t=q%360/360;return t<0&&(t+=1),t}function v(){b(),Z||(Z=!0,t.isFunction(X.settings.scrollStart)&&X.settings.scrollStart.call(this))}function S(){b(),Z&&(Z=!1,t.isFunction(X.settings.scrollComplete)&&X.settings.scrollComplete.call(this)),X.settings.mouseScroll&&h(),X.settings.autoScroll&&u()}function b(){T&&clearInterval(T),C&&(P=!1,clearInterval(C)),D&&(B=!1,clearInterval(D)),x&&(Q=!1,clearInterval(x)),M&&clearInterval(M),k&&clearTimeout(k)}function w(e){if(e=E[e].tooltip){$=!0;var s=O.find(".tooltip");s.find("p").html(e),s.stop().animate({opacity:1},300);var i=-s.outerWidth()/2,o=0-s.outerHeight()-parseInt(s.css("marginBottom"));s.css({left:R-O.offset().left+i,top:W-O.offset().top+o}),t(document).bind("mousemove.tooltip",function(){s.css({left:R-O.offset().left+i,top:W-O.offset().top+o})}),k&&X.settings.pauseAutoScrollIfTooltip&&clearTimeout(k)}}function I(){if($){$=!1;var e=O.find(".tooltip");e.stop().animate({opacity:0},200,function(){t(document).unbind("mousemove.tooltip"),e.css("left",-9999)}),X.settings.autoScroll&&X.settings.pauseAutoScrollIfTooltip&&u()}}this.settings=t.extend({},t.fn.carousel.defaults,s);var M,k,T,C,D,x,R,W,y,A,O=t(e),X=this,H=0,E=[],F=[],z=Math.PI,Y=z/180,j=X.settings.mouseScrollSpeed,N=0,L=0,P=!1,B=!1,G=!1,Q=!1,_=0,q=0,J=X.settings.width/2,K=X.settings.height/2,U=K-X.settings.verticalRadius,V=K+X.settings.verticalRadius,Z=!1,$=!1;O.addClass("carousel").css({width:X.settings.width,height:X.settings.height}),X.settings.xmlSource?(O.empty(),t.ajax({type:"GET",url:X.settings.xmlSource,dataType:t.browser.msie?"text":"xml",success:function(e){var s;t.browser.msie?((s=new ActiveXObject("Microsoft.XMLDOM")).async=!1,s.loadXML(e)):s=e,t(s).find("item").each(function(){for(var e={},s=0;s<t(this).children().length;s++){var i=t(this).children()[s];e[i.nodeName]=t(this).find(i.nodeName).text()}E.push(e)}),i()}})):(O.children().each(function(){for(var e={},s=0;s<t(this).children().length;s++){var i=t(this).children()[s];t(i).is("a")?(e.path=t(i).find("img").attr("src"),e.link=t(i).attr("href"),t(i).attr("target")&&(e.linkTarget=t(i).attr("target"))):t(i).is("img")?e.path=t(i).attr("src"):e[t(i).attr("class")]=t(i).html()}E.push(e)}),O.empty(),i()),this.startAutoScroll=u,this.stopAutoScroll=function(){X.settings.autoScroll=!1,clearTimeout(k)},this.startMouseScroll=h,this.stopMouseScroll=function(){X.settings.mouseScroll=!1,clearInterval(T)},this.startMouseDrag=d,this.stopMouseDrag=function(){P=X.settings.mouseDrag=!1,clearInterval(C)},this.startMouseWheel=g,this.stopMouseWheel=function(){B=X.settings.mouseWheel=!1,clearInterval(D)},this.scrollToItem=a,this.scrollToNext=r,this.scrollToPrevious=c,this.isScrolling=function(){return Z}}t.fn.carousel=function(t){for(var s=[],i=0;i<this.length;i++)this[i].carousel||(this[i].carousel=new e(this[i],t),s.push(this[i].carousel));return s.length>1?s:s[0]},t.fn.carousel.defaults={xmlSource:null,width:500,height:300,itemWidth:100,itemHeight:100,horizontalRadius:250,verticalRadius:100,resize:!0,maintainAspectRatio:!0,crop:!1,scaleRatio:.5,mouseScroll:!1,scrollOnClick:!0,mouseDrag:!1,scrollbar:!1,arrowScrollAmount:50,tooltip:!0,mouseScrollEase:90,mouseDragEase:10,scrollbarEase:10,scrollSpeed:10,mouseDragSpeed:20,mouseScrollSpeed:10,mouseScrollSpeedHover:3,mouseWheel:!1,mouseWheelSpeed:10,mouseScrollReverse:!1,mouseDragReverse:!1,mouseWheelReverse:!1,autoScroll:!1,autoScrollDirection:"next",autoScrollDelay:3e3,pauseAutoScrollIfTooltip:!0,linkTarget:"_blank",itemSelect:null,itemClick:null,itemMouseOver:null,itemMouseOut:null,scrollStart:null,scrollComplete:null}}(jQuery);